<!DOCTYPE html>
<!--
Created using JS Bin
http://jsbin.com

Copyright (c) 2015 by anonymous (http://jsbin.com/wogelamola/1/edit)

Released under the MIT license: http://jsbin.mit-license.org
-->
<meta name="robots" content="noindex">
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-ajaxtransport-xdomainrequest/1.0.3/jquery.xdomainrequest.min.js"></script>
    <meta charset="utf-8">
    <title>CORS AJAX TEST</title>
  </head>
  <body>
    <p>The button below will trigger a query from this page (on domain jsbin.com) to the COMTRADE API (on comtrade.un.org) with settings to make the call CORS-compliant. On a browser that supports CORS you will see a JSON-encoded response displayed under the button. On a browser that does not support CORS (like IE9 in security lockdown mode) you should see an error.</p>
    <button>Make query</button>
    <pre class="out"></pre>
    <script id="jsbin-javascript">
      $('button').on('click', function () {
        $.ajax({
          url: 'http://comtrade.un.org/api/get?max=500&type=C&freq=A&px=HS&ps=2014&r=826&p=251&rg=1&cc=TOTAL',
          timeout: 75000,
          crossDomain: true,
          success: function success (data, status, xhr) {
            console.log(status);
            $('.out').html(JSON.stringify(data, null, '  '));
          },
          error: function error (xhr, status, err) {
            console.log(status);
            $('.out').html(err);
          }
        });
      });
    </script>
  </body>
</html>
